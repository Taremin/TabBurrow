# UIコンポーネントと実装 (`src/tabs/`)

## 技術スタック
*   **React**: UIフレームワーク
*   **react-virtuoso**: 大量データの描画パフォーマンス最適化（仮想スクロール）
*   **CSS Modules**: なし（通常のCSSファイル `tabs.css` を使用）

## コンポーネント構成

### `App.tsx` (Root)
アプリケーション全体の状態管理を担当。
*   **State**: `allTabs` (全データ), `filteredTabs` (表示データ), `customGroups`, `searchQuery` など。
*   **Effects**:
    *   起動時に `getAllTabs()` でIndexedDBからデータ読み込み。
    *   `chrome.runtime.onMessage` でバックグラウンドからの更新通知（`tabs-changed`）を監視し、データをリロード。
    *   検索ワードや日付フィルタの変更に応じて `filteredTabs` を更新。

### `TabList.tsx`
タブ一覧を表示する主要コンポーネント。
*   **GroupedVirtuoso**: データを「カスタムグループ」と「ドメイングループ」に分類して表示。
*   **グループ化ロジック**:
    1.  `tabs` 配列を走査し、Mapに分類。
    2.  設定 (`groupSort`) に基づいてグループ順序をソート。
    3.  各グループ内のタブを設定 (`itemSort`) に基づいてソート。
    4.  フラットな配列とグループカウントを生成してVirtuosoに渡す。

### `TabCard.tsx`
個々のタブを表示するカードコンポーネント。
*   **機能**:
    *   クリックでタブを開く（復元）。
    *   削除ボタンで個別削除。
    *   ドラッグ＆ドロップ（またはメニュー）でのグループ移動（実装予定/実装済み機能による）。
*   **UI**: スクリーンショット、ファビコン、タイトル、ドメイン、保存からの経過時間を表示。

### `Header.tsx`
検索バー、統計情報、全削除ボタンなどを含むヘッダー。
*   **日付フィルタ**: カレンダーUIによる期間指定フィルタリング。

## パフォーマンス考慮事項
*   **仮想スクロール**: 数千件のタブがあってもDOM要素数は一定に保たれ、メモリ消費と描画負荷を低減。
*   **画像遅延読み込み**: TabCardが表示されるまで画像の描画負荷を分散（Virtuosoにより画面外はレンダリングされない）。
